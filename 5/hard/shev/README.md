It appears to be working for the given two examples but I have a feeling that I did not cover all the corners.

To get it accepting input from the command line, comment out line 45